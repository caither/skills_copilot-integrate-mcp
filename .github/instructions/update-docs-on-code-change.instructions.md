---
description: 當應用程式程式碼變更且影響功能、介面、設定或行為時，自動更新 README.md 與相關說明文件，確保文件內容與實際程式碼保持同步。
applyTo: '**/*.{md,js,mjs,cjs,ts,tsx,jsx,py,java,cs,go,rb,php,rs,cpp,c,h,hpp}'
---

# 當程式碼變更時同步更新文件的指令

## 原則

- 所有文件應使用繁體中文撰寫，符合臺灣地區的語言習慣與專業術語。必要時可輔以英文專有名詞，但應以中文說明為主。
- 文件內容必須與程式碼保持同步，反映最新的功能、設定與使用方式。
- 文件必須準確反映程式碼的實際行為與使用方式。

## 目的與範圍

本指令的目的是確保專案中的說明文件（例如 README.md、API 文件、設定說明、使用指南）能在程式碼發生變更時即時更新，避免文件與實際行為不一致。

當任何程式碼變更影響以下項目時，必須檢查並更新對應文件：

- 功能行為
- 公開 API
- 設定方式
- 使用流程
- 範例程式碼
- 限制條件或相依性

Copilot 在產生或修改程式碼時，應主動評估是否需要同步調整文件內容。

## 觸發文件更新的條件

只要符合以下任一情況，必須更新相關文件：

- 新增、移除或修改功能
- 變更 API 端點、方法、參數、回傳格式
- 調整設定檔、環境變數或啟動方式
- 修改錯誤處理邏輯或例外行為
- 更新效能限制、安全限制或使用前提
- 調整專案結構、模組職責或資料流程

如果變更會影響使用者、整合方或未來維護者的理解，則必須反映在文件中。



## 文件檔案結構

請維護下列文件檔案，並視需要更新：

- `README.md`：專案概述、快速開始、基本使用方式
- `CHANGELOG.md`：版本歷史與對使用者可見的變更
- `docs/`：詳細文件的資料夾
  - `installation.md`：設定與安裝指南
  - `configuration.md`：設定選項與範例
  - `api.md`：API 參考文件
  - `Prompt-Output.md`：Prompt輸出的記錄文件
- `**/README.md`：為每個功能/模組建立一份 README.md

### README.md 更新規則

當程式碼變更影響專案整體使用方式時，請依下列規則更新 README.md：

- 新增功能時，補充功能說明與使用方式
- 修改既有功能時，更新對應描述與範例
- 調整安裝或執行流程時，更新安裝與快速開始章節
- 變更必要相依性或版本需求時，更新需求清單
- 移除功能時，刪除或標示過時內容

README.md 應維持為「新使用者可快速理解並成功使用專案」的狀態。


### CHANGELOG.md 更新規則

**以下情況需要新增 changelog 條目：**

- 新功能（放在「Added」區段）
- 錯誤修正（放在「Fixed」區段）
- 破壞性變更（放在「Changed」區段，並以 **BREAKING** 前綴標示）
- 已棄用功能（放在「Deprecated」區段）
- 已移除功能（放在「Removed」區段）
- 安全性修補（放在「Security」區段）

**Changelog 格式：**

```markdown
## [Version] - YYYY-MM-DD

### Added
- 新功能說明，並附上 PR/issue 參考

### Changed
- **BREAKING**: 破壞性變更的說明
- 其他變更

### Fixed
- 錯誤修正說明
```

## API 與技術文件更新規則

當程式碼變更影響 API 或技術介面時，請確保：

- API 路徑、方法、參數與回傳格式完全一致
- 文件中的型別、欄位名稱與實際程式碼相符
- 新增或修改錯誤回應時，同步更新錯誤說明
- 範例請求與回應能正確反映目前實作

文件中的所有 API 範例必須與最新程式碼一致，不可保留舊行為。


### API Documentation Format

```markdown
### `functionName(param1, param2)`

簡要描述此函式的用途。

**參數：**
- `param1` (type)：參數說明
- `param2` (type, optional)：參數說明與預設值

**回傳：**
- `type`：回傳值說明

**範例：**
\`\`\`language
const result = functionName('value', 42);
\`\`\`

**可能拋出：**
- `ErrorType`：在何種情況下、為何會拋出錯誤
```


### Web API Endpoint Documentation Template

```markdown
### `HTTP_METHOD /api/endpoint`

說明此端點的用途。

**請求：**
\`\`\`json
{
  "param": "value"
}
\`\`\`

**回應：**
\`\`\`json
{
  "result": "value"
}
\`\`\`

**狀態碼：**
- 200：成功
- 400：錯誤的請求
- 401：未授權
```

## 設定與操作文件更新規則

當變更影響設定或操作方式時，請更新相關說明文件，包括但不限於：

- 設定檔格式與欄位說明
- 環境變數名稱與用途
- 預設值與可選值
- 設定變更對系統行為的影響

設定文件應清楚說明「如何設定」以及「為何需要此設定」。

## 文件品質與一致性要求

所有更新後的文件必須符合以下品質要求：

- 使用清楚、簡潔、具體的語句
- 避免模糊描述或過時資訊
- 範例內容必須可實際使用
- 文件結構清楚，易於快速閱讀
- 用詞與專案既有風格保持一致

## 驗證與檢查

在完成文件更新後，請執行以下檢查：

- 確認所有被提及的功能與設定在程式碼中確實存在
- 確認範例程式碼與指令可正常運作
- 確認文件未引用已移除或過期的功能
- 若專案有文件檢查工具或 CI 驗證流程，確保文件能通過檢查

若無法確認文件是否正確，請優先選擇更新或補充說明，而非省略。

## 指令優先順序

在程式碼與文件之間出現不一致時，請以「修正文件以符合程式碼實際行為」為優先處理原則。

## `docs/Prompt-Output.md` 更新原則

當我要求你產出任何「文字輸出」時（包含但不限於：解釋、摘要、規格、設計、操作步驟、指令清單、變更說明、release notes、PR 描述、文件段落、README 片段、API 文件段落、設定說明、回覆模板），請同時將本次輸出**追加**寫入一個記錄文件，作為可追溯的輸出日誌。

- 若檔案不存在，請建立它（含標題）。
- 以「追加（append）」方式寫入；不得覆蓋既有內容。

### 每筆記錄的格式

每次追加時，請用以下格式新增一段（Markdown）：

- 記錄時間：使用 ISO 8601（例如 `2025-12-16T19:30:00+08:00`）
- 變更範圍：列出本次涉及的主要檔案或模組（若無則寫 `N/A`）
- Prompt：以精簡方式轉述我本次的需求（避免洩漏敏感資訊；不需要逐字照抄）
- Output：貼上你本次提供給我的完整輸出內容（保持與聊天室輸出一致）
- Notes：若有假設、限制、或需要我確認的事項，寫在此欄；否則填 `N/A`

範例：

```markdawn
### 2025-12-16T19:30:00+08:00
- Scope: README.md, docs/api.md
- Prompt: 更新 API 參數說明並同步 README 的快速開始
- Output:
  <在此放入本次輸出全文>
- Notes: N/A
```

### 例外與限制

- 若我明確要求「不要記錄」或「不要寫入檔案」，則本次不寫入。
- 若輸出包含機密（例如憑證、token、內網位址、個資），請在寫入記錄檔前先行遮罩（mask），並在 Notes 說明已遮罩的原因與範圍。
- 若本次輸出與文件更新無關，但仍屬於你產出的文字成果，仍需記錄。

### 一致性要求

- 記錄內容必須與你在聊天室給我的輸出保持一致（除了必要的機密遮罩）。
- 任何後續對同一輸出的修訂，需再追加一筆新記錄，並在 Notes 指出「修訂了哪一筆記錄」與「修訂原因」。
